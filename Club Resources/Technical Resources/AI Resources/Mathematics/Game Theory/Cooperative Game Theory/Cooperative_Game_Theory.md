# Cooperative Game Theory

## Introduction
**Cooperative game theory** is a branch of game theory that analyzes strategic situations where players are able to form **binding, enforceable agreements**. Unlike non-cooperative game theory, which focuses on individual players' strategies and self-interest, cooperative game theory shifts the focus to what groups of players (**coalitions**) can achieve together. The central questions it seeks to answer are: "What coalitions will form?" and "How should the collective gains from cooperation be fairly and stably distributed among the players?" This framework is crucial for understanding coalition formation, joint ventures, and fair resource allocation in economics, political science, and business.

## The Foundational Tool: The Characteristic Function
In cooperative game theory, the details of the strategic moves are often abstracted away. Instead, the game is defined by what each possible coalition can achieve. This is captured by the **characteristic function**, $v(S)$.

For a given set of players $N$, the characteristic function $v$ assigns a numerical value to every possible coalition (every subset $S \subseteq N$). The value $v(S)$ represents the total payoff that the members of coalition $S$ can guarantee for themselves if they decide to cooperate, independent of the actions of players outside the coalition.

## Solution Concepts: How to Divide the Gains?
The main goal of cooperative game theory is to find a reasonable way to distribute the total payoff generated by the "grand coalition" (the coalition of all players), $v(N)$, among the individual players. There are two primary solution concepts:

### 1. The Core (A Concept of Stability)
The **Core** is the set of all possible payoff allocations that are "stable" because no sub-coalition has a rational incentive to break away from the grand coalition and do better on its own.

A payoff vector $\mathbf{x} = (x_1, x_2, \dots, x_n)$ is in the Core if it satisfies:
1.  **Efficiency**: The total allocated payoff is equal to the value of the grand coalition: $\sum_{i \in N} x_i = v(N)$.
2.  **Coalitional Rationality**: The sum of the payoffs to any sub-coalition $S$ is at least as much as that coalition could get on its own: $\sum_{i \in S} x_i \ge v(S)$ for all $S \subseteq N$.

The Core can contain many possible allocations, a single allocation, or it can even be empty if no stable allocation exists.

### 2. The Shapley Value (A Concept of Fairness)
The **Shapley Value** is a unique solution concept that provides a single, "fair" payoff allocation to each player. It is calculated based on a player's **average marginal contribution** to every possible coalition they could join.

The Shapley value for a player $i$ is given by the formula:

$$\phi_i(v) = \sum_{S \subseteq N \setminus \{i\}} \frac{|S|! (n - |S| - 1)!}{n!} [v(S \cup \{i\}) - v(S)]$$

The Shapley value is the only allocation method that satisfies four desirable fairness axioms: Efficiency, Symmetry (equal pay for equal work), Dummy Player (zero pay for zero contribution), and Additivity.

## Example: A 3-Player Project
**Scenario**: Three companies (1, 2, 3) are considering a joint venture. The value they can create, alone and in coalitions, is given by the characteristic function:
-   $v(\{1\}) = 10, \quad v(\{2\}) = 0, \quad v(\{3\}) = 0$
-   $v(\{1,2\}) = 20, \quad v(\{1,3\}) = 25, \quad v(\{2,3\}) = 15$
-   $v(\{1,2,3\}) = 40$

**Analysis with the Core**: Is the payoff allocation $\mathbf{x} = (20, 10, 10)$ stable?
-   **Efficiency**: $20+10+10 = 40$. This matches $v(\{1,2,3\})$. (OK)
-   **Coalitional Rationality**:
    -   Coalition {1,2} gets $x_1+x_2 = 20+10=30$. Since $30 \ge v(\{1,2\})=20$, they have no incentive to leave. (OK)
    -   Coalition {2,3} gets $x_2+x_3 = 10+10=20$. Since $20 \ge v(\{2,3\})=15$, they have no incentive to leave. (OK)
-   This allocation appears to be in the Core. An allocation like $(15, 5, 20)$ would **not** be in the Core, because coalition {1,2} would get $15+5=20$, which is equal to what they can get on their own, but coalition {1,3} would get $15+20=35$, which is much better than the $v(\{1,3\})=25$ they can guarantee alone. Wait, the logic for the second point is backward. Let's re-evaluate the unstable point. `x = (15, 5, 20)`. `x1+x2=20`, which is equal to `v({1,2})`. `x1+x3=35`, which is greater than `v({1,3})`. `x2+x3=25`, which is greater than `v({2,3})`. So this point seems to be in the core too. Let's find one that isn't. `x = (12, 8, 20)`. `x1+x2=20`, equal to `v({1,2})`. This seems fine. Ah, `x1` alone can get 10, but is only allocated 12. Let's try `x=(5, 15, 20)`. `v({1})=10`, but `x1=5`. This violates individual rationality. Thus `(5, 15, 20)` is not in the Core.

**Analysis with the Shapley Value**:
By applying the formula, we can calculate the unique "fair" payoff for each company based on their average contribution. For example, the marginal contributions for Player 2 are:
-   Joining $\emptyset$: $v(\{2\}) - v(\emptyset) = 0 - 0 = 0$
-   Joining {1}: $v(\{1,2\}) - v(\{1\}) = 20 - 10 = 10$
-   Joining {3}: $v(\{2,3\}) - v(\{3\}) = 15 - 0 = 15$
-   Joining {1,3}: $v(\{1,2,3\}) - v(\{1,3\}) = 40 - 25 = 15$
Averaging these contributions according to the formula gives Player 2's fair share of the total $40 profit.

## Applications
1.  **Machine Learning (Explainable AI)**: The Shapley value has become the foundation for **SHAP (SHapley Additive exPlanations)**, a state-of-the-art technique for explaining the output of any machine learning model. It treats each feature as a "player" in a game to make a prediction, and the Shapley value is used to fairly distribute the credit for the prediction among the features.
2.  **Business and Economics**: Modeling the formation of joint ventures and cartels. It is also used in **cost allocation** problems to fairly divide the cost of a shared resource (like an airport runway or a data center) among its users.
3.  **Political Science**: Analyzing voting power in weighted voting systems (like parliaments or shareholder meetings). The Shapley value can quantify the true power of each voting bloc, which may not be proportional to the number of votes it holds.
4.  **Environmental Policy**: For fairly allocating the costs of pollution reduction among several countries or firms that share a common resource like a river or an airshed.